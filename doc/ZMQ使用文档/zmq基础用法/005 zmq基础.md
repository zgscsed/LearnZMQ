## zmq基础

### zmq介绍

zmq是一个高性能异步消息传递库，支持进程间，tcp和多播等多种方式传输方式，并且提供多种模式，请求应答，发布订阅等，n对n的连接。

### zmq特点

- zmq负责自动重连，可以任意顺序启动组件
- zmq会在后台线程异步处理io操作，并且使用一种不会死锁的数据结构来存储消息
- zmq在有必要的情况下会自动将消息放入队列中，一旦建立连接就开始发送。
- zmq有阈值(HWM)机制，可以避免消息溢出，当队列已满，zmq会自动阻塞发送者，或者丢弃部分消息，这个可以设置。
- zmq可以使用不同的通信协议进行连接，tcp,广播，进程内，进程间，改变通信协议不需要修改代码
- zmq提供了多种模式进行消息路由，请求应答模式，发布订阅模式等。
- zmq发送整个消息，使用消息帧的机制来传递，发送10KB，就会收到10KB
- zmq不限制消息的格式，可以使用protocol buffers序列化消息

### zmq API

zmq提供一套套接字api
```
创建和销毁套接字：zmq_socket(), zmq_close()
配置和读取套接字选项：zmq_setsockopt(), zmq_getsockopt()
为套接字建立连接：zmq_bind(), zmq_connect()
发送和接收消息：zmq_send(), zmq_recv()
```

### 关键词

死锁的数据结构 : 

阈值(HWM)机制：

消息帧的机制：